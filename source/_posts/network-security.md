---
title: 网络安全
date: 2020-01-13 21:25:22
tags: [IT, 信息安全] 
---

# HTTP/IP协议与DNS域名系统

## HTTP

比如我的博客是`http://toyourheart163.github.io`
这个`http://`就是一个网络协议，传输html、js、图片、各种文件

## SSL/TLS
SSL是“Secure Sockets Layer”的缩写，中文叫做“安全套接层”。
TLS是SSL标准化后改名的。（是“Transport Layer Security”的缩写），中文叫做“传输层安全协议”。

## HTTP与TCP

在网络7层分层模型中，TCP 被称为“传输层协议”，而 HTTP 被称为“应用层协议”。有很多常见的应用层协议是以 TCP 为基础的，比如“FTP、SMTP、POP、IMAP”等。

传输层主要有两个协议，分别是 TCP 和 UDP。TCP 比 UDP 更可靠。你可以把 TCP 协议想象成某个水管，发送端这头进水，接收端那头就出水。并且 TCP 协议能够确保，先发送的数据先到达（与之相反，UDP 不保证这点）。

HTTP 对 TCP 连接的使用，分为两种方式：俗称“短连接”和“长连接”。以前要传输的数据少，用短连接就可以了。现在连接一个网页要传输高清图片、js几十个、css几个，所以只能用长连接(keep-alive)减少CPU开销。比如某个银行app一打开，一下子去掉了我20M的流量。还有高德地图。

## HTTPS

https 就是http与ssl组合，也就是加密了。手机抓包工具没有用了。只能在虚拟机上探测。除非手机root过了。

HTTPS协议具有的特性，我关注的3点是：
1. 保密性（防泄密），防止被别人知道你看的内容。
2. 完整性（防篡改），防止电信加广告。
3. 真实性（防假冒），防止中间人攻击，比如百度把你访问`www.google.com`替换成百度首页的内容如果是涉及金融或者安全就麻烦了。修改ip要修改DNS.

## 手机app爬虫, ca证书
中间人攻击可以在安卓虚拟机root后，传输mitmproxy证书，弄成根证书。然后在pc打开mitmproxy这个软件，在这过程中发现了微信老是传输一些东西到包含analysis的网址中。下次用个小号看看它在搞什么鬼！
也可以用Charles图形界面的抓包工具。mitmproxy的好处是配合python自动化。

## 服务器加密

购买ca证书, 然后nginx配置443端口与ssl，配置证书路径。

## DNS

根据域名查ip地址
```bash
ping -c 4 toyourheart163.github.io
```

|域名| ip地址|
|---|---|
|toyourheart163.github.io|185.199.111.153|

hosts文件如果有域名与ip的对应关系就直达ip地址。假设设置错误，就会到达别的网站。
没有就从DNS域名服务查询。

可以修改hosts文件直达ip地址，一般来说电脑的DNS设置是路由器的地址如：`192.168.1.1`，如果没有用路由器，看到的是电信的DNS，为了防止电信修改，可以修改为公共的。如`8.8.8.8`
